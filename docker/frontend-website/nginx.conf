# DEUTSCH: Nginx-Konfiguration für die Frontend-Website (fwv-raura.ch)
# DEUTSCH: Läuft im Docker-Container, Traefik leitet den Traffic hierher weiter
server {
    listen 80;                                    # DEUTSCH: Port 80 intern (Traefik macht HTTPS)
    server_name _;                                # DEUTSCH: Akzeptiert alle Hostnamen
    root /usr/share/nginx/html;                   # DEUTSCH: Statische Dateien aus dem Docker-Image
    index index.html;

    # DEUTSCH: SPA-Fallback — alle Pfade die keine Datei finden werden auf index.html umgeleitet
    # DEUTSCH: Nötig damit Unterseiten wie /vorstand.html oder /mein.html direkt aufgerufen werden können
    location / {
        try_files $uri $uri/ /index.html;
    }

    # DEUTSCH: Statische Assets (JS, CSS, Bilder, Fonts) werden 1 Jahr gecacht
    # DEUTSCH: "immutable" = Browser muss nie erneut prüfen ob die Datei aktuell ist
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # DEUTSCH: PDF-Dateien werden 1 Monat gecacht (z.B. Kalender, Arbeitspläne)
    location ~* \.pdf$ {
        expires 1M;
        add_header Cache-Control "public";
    }
}
