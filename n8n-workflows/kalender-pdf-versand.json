{
  "name": "Kalender-PDF Versand",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "trigger-calendar-pdf",
        "options": {}
      },
      "id": "webhook-1",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [250, 300],
      "webhookId": "calendar-pdf-trigger"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.github.com/repos/Feuerwehrverein-Raura/Homepage/actions/workflows/generate-calendar-pdf.yml/dispatches",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"ref\": \"main\", \"inputs\": {\"send_post\": \"true\"}}",
        "options": {}
      },
      "id": "github-dispatch",
      "name": "GitHub Action triggern",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [450, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "github-token",
          "name": "GitHub Token"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "website@fwv-raura.ch",
        "toEmail": "aktuar@fwv-raura.ch",
        "subject": "Kalender-PDF Versand gestartet",
        "emailType": "html",
        "html": "<h2>Kalender-PDF Versand</h2><p>Der automatische Versand des Kalender-PDFs an alle Post-Mitglieder wurde gestartet.</p><p>Die Briefe werden via Pingen versendet.</p><p>Status kann auf GitHub unter Actions überprüft werden.</p>"
      },
      "id": "email-1",
      "name": "Benachrichtigung senden",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [650, 300],
      "credentials": {
        "smtp": {
          "id": "smtp-mailcow",
          "name": "Mailcow SMTP"
        }
      }
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [[{"node": "GitHub Action triggern", "type": "main", "index": 0}]]
    },
    "GitHub Action triggern": {
      "main": [[{"node": "Benachrichtigung senden", "type": "main", "index": 0}]]
    }
  },
  "settings": {
    "executionOrder": "v1"
  }
}
