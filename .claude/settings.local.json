{
  "permissions": {
    "allow": [
      "Bash(curl -s -X GET \"https://n8n.fwv-raura.ch/api/v1/workflows\" -H \"X-N8N-API-KEY: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxNGZlZDE4My01YzBiLTQ4OWUtYWIzMS1kY2IxZTY5YzY3N2EiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzYzNTU2ODU1LCJleHAiOjE3NjYwOTg4MDB9.uBpF3c8R4jRA0WmCOeggEL24x7Snac4FbJou3VQtKi4\")",
      "Bash(curl -s -X POST \"https://n8n.fwv-raura.ch/api/v1/workflows\" )",
      "Bash(curl:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nn8n Integration: Kontaktformular, Event-Anmeldungen, Anmeldungs-Dashboard\n\n- Kontaktformular auf n8n-Webhook umgestellt\n- Event-Anmeldungen (Helfer/Teilnehmer) auf n8n-Webhook umgestellt\n- Anmeldungen werden in anmeldungen_data.json gespeichert\n- Neue Anmeldungen-Seite fÃ¼r Vorstand (anmeldungen.html)\n- n8n-Workflows als JSON exportiert\n- Schicht-IDs und Namen im Anmeldeformular\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push)",
      "Bash(cat:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nNewsletter-System implementiert\n\n- Newsletter-Anmeldeformular im Footer\n- Newsletter-Anmeldung Workflow (Double-Opt-In)\n- Newsletter-BestÃ¤tigung Workflow\n- Abonnenten werden in newsletter_subscribers.json gespeichert\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(gh secret set:*)",
      "Bash(jq:*)",
      "Bash(git commit:*)",
      "Bash(docker-compose build:*)",
      "Bash(gh run list:*)",
      "Bash(gh run view:*)",
      "Bash(ls:*)",
      "Bash(node scripts/generate-ics.js:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(git push:*)",
      "Bash(gh api:*)",
      "Bash(rsync:*)",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml build frontend-website 2>&1 | tail -30\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml build 2>&1 | tail -50\")",
      "Bash(ssh root@37.27.88.245 \"\ncd /opt/fwv-raura\n# Kopiere shared middleware in alle Backends\ncp shared/auth-middleware.js backend-members/src/\ncp shared/auth-middleware.js backend-events/src/\ncp shared/auth-middleware.js backend-accounting/src/\ncp shared/auth-middleware.js backend-dispatch/src/\necho ''Shared middleware kopiert''\nls -la backend-members/src/\n\")",
      "Bash(ssh root@37.27.88.245 \"\ncd /opt/fwv-raura\n# Korrigiere Import-Pfad in backend-members\nsed -i \"\"s|require\\(''../../shared/auth-middleware''\\)|require\\(''./auth-middleware''\\)|g\"\" backend-members/src/index.js\necho ''Import-Pfad korrigiert''\ngrep ''auth-middleware'' backend-members/src/index.js\n\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml build 2>&1 | tail -60\")",
      "Bash(ssh root@37.27.88.245 \"\ncd /opt/fwv-raura\n# Korrigiere alle Dockerfiles\nfor dir in backend-members backend-events backend-accounting backend-dispatch; do\n    sed -i ''s/npm ci --only=production/npm install --omit=dev/g'' $dir/Dockerfile\n    echo \"\"$dir/Dockerfile aktualisiert:\"\"\n    grep ''npm'' $dir/Dockerfile\ndone\n\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml build 2>&1 | tail -40\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml up -d 2>&1\")",
      "Bash(ssh root@37.27.88.245 \"docker ps --filter ''name=fwv-'' --format ''table {{.Names}}\\\\t{{.Status}}\\\\t{{.Ports}}''\")",
      "Bash(ssh root@37.27.88.245 \"curl -s http://localhost/health 2>&1 || echo ''Website health check fehlgeschlagen''\")",
      "Bash(ssh root@37.27.88.245 \"docker exec fwv-frontend-website curl -s http://localhost/health && echo '''' && docker exec fwv-api-members curl -s http://localhost:3000/health\")",
      "Bash(ssh root@37.27.88.245 \"docker exec fwv-api-members wget -qO- http://localhost:3000/health\")",
      "Bash(dig:*)",
      "Bash(ssh root@37.27.88.245 \"curl -s ifconfig.me\")",
      "Bash(AUTH_FLOW=\"b1ad894d-1ac9-42a6-aed7-62c34b428486\":*)",
      "Bash(TOKEN=\"SpyNwzMTpZmKWVsksFg8monL2oStjxnYYy85ECh5WeQxTqhad5LmIoXheTjZ\")",
      "Bash(__NEW_LINE_856ef91189a2a475__ curl -s -X POST \"https://auth.fwv-raura.ch/api/v3/providers/oauth2/\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\n    \"\"name\"\": \"\"FWV Members API\"\",\n    \"\"authorization_flow\"\": \"\"$AUTH_FLOW\"\",\n    \"\"client_type\"\": \"\"confidential\"\",\n    \"\"client_id\"\": \"\"fwv-members\"\",\n    \"\"redirect_uris\"\": \"\"https://fwv-raura.ch/auth-callback\"\"\n  }\")",
      "Bash(__NEW_LINE_0cfd84c82fd18756__ curl -v \"https://auth.fwv-raura.ch/api/v3/core/users/me/\" -H \"Authorization: Bearer $TOKEN\")",
      "Bash(__NEW_LINE_ef4b0e86b3280c11__ curl -s -X POST \"https://auth.fwv-raura.ch/api/v3/providers/oauth2/\" -H 'Authorization: Bearer SpyNwzMTpZmKWVsksFg8monL2oStjxnYYy85ECh5WeQxTqhad5LmIoXheTjZ' -H \"Content-Type: application/json\" -d \"{\"\"name\"\": \"\"FWV Members API\"\", \"\"authorization_flow\"\": \"\"$AUTH_FLOW\"\", \"\"client_type\"\": \"\"confidential\"\", \"\"client_id\"\": \"\"fwv-members\"\", \"\"redirect_uris\"\": \"\"https://fwv-raura.ch/auth-callback\"\"}\")",
      "Bash(done)",
      "Bash(ssh root@37.27.88.245 \"cat /opt/fwv-raura/.env\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && sed -i ''s|AUTHENTIK_CLIENT_SECRET_MEMBERS=CHANGE_ME|AUTHENTIK_CLIENT_SECRET_MEMBERS=OGgDaqKUUyDfh7aCo7jVj7v43dWqHL807AZfaNG7shMKOikbjBJGRbPc4DFljbqKjdOKugOozmYuC9mRYHSgywTUmrK1Oh5Jj9SxkVptdM13FX7jvxBZQqLEHylMHpU9|'' .env && sed -i ''s|AUTHENTIK_CLIENT_SECRET_EVENTS=CHANGE_ME|AUTHENTIK_CLIENT_SECRET_EVENTS=c2HZA6luZNc5SXzDvrHQWwnK1lIttNpUAIZyRxtLs2RXYqpnVF721GEeOJTMMUIbUgaiG9fARtfQIXcliN9KN20MprcOuv6WAQrbA3m2IU7OKVdp3mAfW5sBa3DXTw1r|'' .env && sed -i ''s|AUTHENTIK_CLIENT_SECRET_ACCOUNTING=CHANGE_ME|AUTHENTIK_CLIENT_SECRET_ACCOUNTING=72aXoOkKEVudtwApT56kL9TBEkqvRX4OPOWr4x0Agd0CPSA8HCaJg5uzM4cvlBuIEqd95Rivq6U2ku1DpHxRm1lLf4IpN1g9ewyCUl7peHvCaoxLnw6O8eO8NhQ7U6CO|'' .env && sed -i ''s|AUTHENTIK_CLIENT_SECRET_DISPATCH=CHANGE_ME|AUTHENTIK_CLIENT_SECRET_DISPATCH=MZN9L6nDbUCOOEIgux4Lpl7m1tQVT3X0AfbckT5hl3HJID915dtqOUMzJjQCVaTykY0BDM99mpXpLNiCQgUQQyfebz6OHWB61meaNbg8L6TF1cchCz32QWp4niZFLrxj|'' .env && echo ''Authentik secrets updated''\")",
      "Bash(ssh root@37.27.88.245 \"cd /opt/fwv-raura && docker compose -f docker-compose.prod.yml down && docker compose -f docker-compose.prod.yml up -d\")",
      "Bash(ssh root@37.27.88.245 \"docker ps --format ''table {{.Names}}\\\\t{{.Status}}\\\\t{{.Ports}}'' | grep fwv\")",
      "Bash(ssh root@37.27.88.245 \"docker ps --format ''table {{.Names}}\\\\t{{.Status}}'' | grep fwv\")",
      "Bash(ssh:*)",
      "Bash(host:*)",
      "Bash(scp:*)",
      "Bash(python3:*)",
      "Bash(xargs:*)",
      "Bash(gh repo view:*)",
      "Bash(git restore:*)",
      "Bash(gh workflow run:*)",
      "Bash(printf:*)",
      "Bash(xxd:*)",
      "Bash(openssl rand:*)",
      "Bash(chmod:*)",
      "Bash(/home/stefan/Dokumente/Github/Feuerwehrverien-Raura/Homepage/scripts/test-login.sh:*)",
      "Bash(gh release list:*)",
      "Bash(grep:*)",
      "Bash(gh run watch:*)",
      "Bash(node --check:*)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(gh repo list:*)",
      "Bash(tar:*)",
      "Bash(pdftotext:*)",
      "Bash(AUTHENTIK_TOKEN=\"QWpdAtuD28w8bPSrvz3R16BlPWUMGlYjeb5CjZmkI3TJZPVIM6ikTgbwmKT8\")",
      "Bash(identify:*)",
      "Bash(docker exec:*)"
    ],
    "deny": [],
    "ask": []
  }
}
